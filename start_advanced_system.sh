#!/bin/bash

echo "======================================================"
echo "ðŸš€ MARWAN HUB FACTORIES v3.1.0 - Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ù…ØªÙ‚Ø¯Ù…"
echo "======================================================"

# ØªÙ†Ø¸ÙŠÙ Ø£ÙŠ Ø®ÙˆØ§Ø¯Ù… Ù‚Ø¯ÙŠÙ…Ø©
echo "ðŸ§¹ Ø¬Ø§Ø±ÙŠ ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø®ÙˆØ§Ø¯Ù… Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©..."
pkill -f "python3" 2>/dev/null
sleep 2

# ØªØ´ØºÙŠÙ„ Ø§Ù„Ø®Ø§Ø¯Ù… Ø§Ù„Ù…ØªÙ‚Ø¯Ù…
echo ""
echo "ðŸŒ Ø¬Ø§Ø±ÙŠ ØªØ´ØºÙŠÙ„ Ø§Ù„Ø®Ø§Ø¯Ù… Ø§Ù„Ù…ØªÙ‚Ø¯Ù…..."
echo "ðŸ“Š Ø³ÙŠØ¹Ù…Ù„ Ø¹Ù„Ù‰: http://localhost:8000"
echo ""

python3 unified_server_enhanced.py &
SERVER_PID=$!

sleep 3

echo ""
echo "âœ… Ø§Ù„Ø®Ø§Ø¯Ù… ÙŠØ¹Ù…Ù„! (PID: $SERVER_PID)"
echo ""
echo "ðŸŽ¯ Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© Ø§Ù„Ù…ØªØ§Ø­Ø©:"
echo "   1. ðŸ“‹ Ù†Ø¸Ø§Ù… Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬"
echo "   2. ðŸ•’ Ø¬Ø¯ÙˆÙ„Ø© Ø§Ù„Ù…ØµØ§Ù†Ø¹ Ø§Ù„Ø°ÙƒÙŠØ©"
echo "   3. ðŸ§ª Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø¬ÙˆÙŠØ© Ù…ØªÙ‚Ø¯Ù…Ø©"
echo "   4. ðŸ“Š Ù…Ø±Ø§Ù‚Ø¨Ø© ÙÙŠ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ"
echo "   5. âš¡ ØªØ­ÙƒÙ… Ù…Ù†Ø·Ù‚ÙŠ ÙƒØ§Ù…Ù„"
echo ""
echo "ðŸ“Œ Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ù†Ø¸Ø§Ù…:"
echo "   â€¢ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©: http://localhost:8000/dashboard_live.html"
echo "   â€¢ API Ø§Ù„Ù…ØµØ§Ù†Ø¹: http://localhost:8000/api/factories"
echo "   â€¢ API Ø§Ù„Ø·Ù„Ø¨Ø§Øª: http://localhost:8000/api/production/requests"
echo "   â€¢ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØµØ­Ø©: http://localhost:8000/api/health"
echo ""
echo "ðŸ” Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§ØªØµØ§Ù„:"
curl -s http://localhost:8000/api/health | python3 -m json.tool || echo "âš ï¸ Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„..."

echo ""
echo "======================================================"
echo "ðŸŽ‰ Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ØªÙ‚Ø¯Ù… ÙŠØ¹Ù…Ù„ Ø¨Ù†Ø¬Ø§Ø­!"
echo "ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¢Ù†:"
echo "   1. Ø¥Ù†Ø´Ø§Ø¡ Ø·Ù„Ø¨Ø§Øª Ø¥Ù†ØªØ§Ø¬ Ø¬Ø¯ÙŠØ¯Ø©"
echo "   2. Ø¬Ø¯ÙˆÙ„Ø© Ø§Ù„Ù…ØµØ§Ù†Ø¹ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹"
echo "   3. Ø¥Ø¬Ø±Ø§Ø¡ Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø¬ÙˆÙŠØ©"
echo "   4. Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø£Ø¯Ø§Ø¡ ÙÙŠ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ"
echo "======================================================"

# ÙØªØ­ Ø§Ù„Ù…ØªØµÙØ­ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
termux-open-url "http://localhost:8000/dashboard_live.html" 2>/dev/null

# Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±
echo ""
echo "Press Ctrl+C to stop the server..."
echo "======================================================"

# Ø¹Ø±Ø¶ Ø§Ù„Ø³Ø¬Ù„Ø§Øª
wait
